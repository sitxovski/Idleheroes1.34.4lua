# Idle Heroes 1.34.4 - Python Tools Collection

–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–µ–≤–µ—Ä—Å-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥–∞, –¥–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ –∏–≥—Ä—ã Idle Heroes –≤–µ—Ä—Å–∏–∏ 1.34.4.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏](#-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã-—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏)
- [–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏](#-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã-–¥–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏)
- [–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞–Ω–∞–ª–∏–∑–∞](#-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã-–∞–Ω–∞–ª–∏–∑–∞)
- [–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö](#-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã-–∏–∑–≤–ª–µ—á–µ–Ω–∏—è-–¥–∞–Ω–Ω—ã—Ö)
- [–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Protobuf](#-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã-protobuf)
- [–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)

---

## üîì –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏

### decrypt_ULTIMATE.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –§–∏–Ω–∞–ª—å–Ω—ã–π –¥–µ–∫–æ–¥–µ—Ä –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö Lua —Ñ–∞–π–ª–æ–≤ –∏–≥—Ä—ã.

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
```
DHGAMES ‚Üí XOR ‚Üí XXTEA ‚Üí DHZAMES ‚Üí ZLIB ‚Üí –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π Lua
```

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Ä–µ–≤–µ—Ä—Å-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥–µ `libcocos2dlua.so`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç XOR —Ç–∞–±–ª–∏—Ü—ã –∏–∑ –Ω–∞—Ç–∏–≤–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- XXTEA —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º –∫–ª—é—á–æ–º
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã DHZAMES
- –§–∏–Ω–∞–ª—å–Ω–∞—è –¥–µ–∫–æ–º–ø—Ä–µ—Å—Å–∏—è ZLIB

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python decrypt_ULTIMATE.py
```

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ `.lua` —Ñ–∞–π–ª—ã –∏–∑ `lua_backup/`

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–∞–π—Ç–∫–æ–¥ —Ñ–∞–π–ª—ã –≤ `decrypted_lua_FINAL/`

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `xor_data()` - XOR —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- `generate_key()` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞ XXTEA
- `xxtea_decrypt()` - XXTEA —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞
- `decrypt_file()` - –ü–æ–ª–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏

---

## üî® –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏

### improved_lua_decompiler.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –¥–µ–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä Lua 5.1 –±–∞–π—Ç–∫–æ–¥–∞ –≤ —á–∏—Ç–∞–µ–º—ã–π –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥.

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –í—Å–µ 38 –æ–ø–∫–æ–¥–æ–≤ Lua 5.1 (–ø–µ—Ä–µ–º–µ—à–∞–Ω–Ω—ã–µ –≤ Idle Heroes)
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ debug info
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (if/while/for)
- ‚úÖ –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞, —Å—Ä–∞–≤–Ω–µ–Ω–∏—è, —Ü–∏–∫–ª—ã)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python improved_lua_decompiler.py
```

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```python
class ImprovedLuaDecompiler:
    - read_function()      # –ß—Ç–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –±–∞–π—Ç–∫–æ–¥–∞
    - decode_instruction() # –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–∫–æ–¥–∞
    - decompile_code()     # –î–µ–∫–æ–º–ø–∏–ª—è—Ü–∏—è –∫–æ–¥–∞
    - analyze_control_flow() # –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```

**–û–ø–∫–æ–¥—ã (–ø–µ—Ä–µ–º–µ—à–∞–Ω–Ω—ã–µ):**
- `0x00` = SUB (–≤—ã—á–∏—Ç–∞–Ω–∏–µ)
- `0x01` = LOADK (–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã)
- `0x06` = CALL (–≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏)
- `0x1c` = MOVE (–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞)
- `0x1a` = RETURN (–≤–æ–∑–≤—Ä–∞—Ç)
- –ò —Ç.–¥. (–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤ –∫–æ–¥–µ)

---

### advanced_decompiler.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ë–∞–∑–æ–≤—ã–π –¥–µ–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä Lua 5.1 —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º —á–∏—Ç–∞–µ–º–æ–≥–æ –∫–æ–¥–∞.

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–≥–æ–ª–æ–≤–∫–∞ Lua
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç (—Å—Ç—Ä–æ–∫–∏, —á–∏—Å–ª–∞, boolean)
- –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from advanced_decompiler import decompile_file

code, status = decompile_file("file.lua")
if code:
    print(code)
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ã–≤–æ–¥–∞:**
```lua
-- Function: @source.lua
-- Lines: 1-100
-- Parameters: 2, Vararg: false

-- Code:
var0 = K0  -- "constant_value"
var1 = var0 + 10
return var1

-- Constants:
-- [0] "constant_value"
-- [1] 10
```

---

### decompile_all_advanced.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–∞—Å—Å–æ–≤–∞—è –¥–µ–∫–æ–º–ø–∏–ª—è—Ü–∏—è –≤—Å–µ—Ö Lua —Ñ–∞–π–ª–æ–≤.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python decompile_all_advanced.py
```

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –°–∫–∞–Ω–∏—Ä—É–µ—Ç `decrypted_lua_FINAL/`
2. –î–µ–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π `.lua` —Ñ–∞–π–ª
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `decompiled_lua_READABLE/`
4. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

**–í—ã–≤–æ–¥:**
```
[1/500] ‚úÖ app/config/hero.lua
[2/500] ‚úÖ app/config/item.lua
...
‚úÖ –£—Å–ø–µ—à–Ω–æ: 495
‚ùå –û—à–∏–±–æ–∫: 5
```

---

## üîç –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞–Ω–∞–ª–∏–∑–∞

### analyze_bytecode.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Lua –±–∞–π—Ç–∫–æ–¥–∞.

**–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç:**
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ Lua (—Å–∏–≥–Ω–∞—Ç—É—Ä–∞, –≤–µ—Ä—Å–∏—è, —Ñ–æ—Ä–º–∞—Ç)
- –†–∞–∑–º–µ—Ä—ã —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- Endianness
- Hex dump –ø–µ—Ä–≤—ã—Ö –±–∞–π—Ç
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —ç—Ç–∞–ª–æ–Ω–Ω—ã–º Lua 5.1
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ñ—É–Ω–∫—Ü–∏—è—Ö

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python analyze_bytecode.py
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üìÅ –§–∞–π–ª: hero.lua
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üîç –ó–ê–ì–û–õ–û–í–û–ö:
  –°–∏–≥–Ω–∞—Ç—É—Ä–∞: 1b4c7561 (b'\x1bLua')
  –í–µ—Ä—Å–∏—è: 51
  –§–æ—Ä–º–∞—Ç: 00
  sizeof(int): 04
  sizeof(size_t): 04
  sizeof(Instruction): 04
  sizeof(lua_Number): 08

üî¨ –°–†–ê–í–ù–ï–ù–ò–ï –° –≠–¢–ê–õ–û–ù–ù–´–ú LUA 5.1:
  ‚úÖ –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É
```

---

### analyze_formulas.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏–≥—Ä–æ–≤—ã—Ö —Ñ–æ—Ä–º—É–ª –∏ –º–µ—Ö–∞–Ω–∏–∫.

**–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç:**
- üó°Ô∏è –§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞ —É—Ä–æ–Ω–∞
- üé≤ –®–∞–Ω—Å—ã –ø—Ä–∏–∑—ã–≤–∞ –≥–µ—Ä–æ–µ–≤
- üë§ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –≥–µ—Ä–æ–µ–≤
- ‚öîÔ∏è –ú–µ—Ö–∞–Ω–∏–∫–∏ –Ω–∞–≤—ã–∫–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python analyze_formulas.py
```

**–¢—Ä–µ–±—É–µ—Ç:** –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `extract_game_mechanics.py`

**–í—ã–≤–æ–¥:**
```
üó°Ô∏è –§–û–†–ú–£–õ–´ –£–†–û–ù–ê
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìÅ fight.lua
–ù–∞–π–¥–µ–Ω–æ —Ç–∏–ø–æ–≤ —Ñ–æ—Ä–º—É–ª: 15

DAMAGE:
  –ö–æ–Ω—Ç–µ–∫—Å—Ç: atk ‚Üí * ‚Üí 1.5 ‚Üí - ‚Üí armor
  –ö–æ–Ω—Ç–µ–∫—Å—Ç: base_damage ‚Üí + ‚Üí crit_bonus

üé≤ –®–ê–ù–°–´ –ü–†–ò–ó–´–í–ê
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π:
  0.5%: 5-–∑–≤–µ–∑–¥–æ—á–Ω—ã–µ –≥–µ—Ä–æ–∏
  3%: 4-–∑–≤–µ–∑–¥–æ—á–Ω—ã–µ –≥–µ—Ä–æ–∏
  20%: 3-–∑–≤–µ–∑–¥–æ—á–Ω—ã–µ –≥–µ—Ä–æ–∏
```

---

## üì¶ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### extract_game_data.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–≥—Ä–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –¥–µ–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö Lua —Ñ–∞–π–ª–æ–≤.

**–ò–∑–≤–ª–µ–∫–∞–µ—Ç:**
- `hero.lua` ‚Üí –î–∞–Ω–Ω—ã–µ –≥–µ—Ä–æ–µ–≤
- `item.lua` ‚Üí –î–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- `skill.lua` ‚Üí –î–∞–Ω–Ω—ã–µ –Ω–∞–≤—ã–∫–æ–≤
- `buff.lua` ‚Üí –î–∞–Ω–Ω—ã–µ –±–∞—Ñ—Ñ–æ–≤
- `activity.lua` ‚Üí –î–∞–Ω–Ω—ã–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
- `shop.lua` ‚Üí –î–∞–Ω–Ω—ã–µ –º–∞–≥–∞–∑–∏–Ω–∞

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python extract_game_data.py
```

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- JSON —Ñ–∞–π–ª—ã –≤ `private-server/data/game_configs/`

**–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
```json
{
  "1001": {
    "id": 1001,
    "name": "Norma",
    "quality": 3,
    "base_atk": 150,
    "base_hp": 2000
  }
}
```

---

### extract_game_mechanics.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–≥—Ä–æ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∫ –∏ —Ñ–æ—Ä–º—É–ª.

**–ò–∑–≤–ª–µ–∫–∞–µ—Ç:**
- –§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞ —É—Ä–æ–Ω–∞
- –®–∞–Ω—Å—ã –ø—Ä–∏–∑—ã–≤–∞ –≥–µ—Ä–æ–µ–≤
- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –≥–µ—Ä–æ–µ–≤
- –ú–µ—Ö–∞–Ω–∏–∫–∏ –Ω–∞–≤—ã–∫–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python extract_game_mechanics.py
```

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- `private-server/data/game_mechanics.json`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```json
{
  "damage_formulas": {
    "fight.lua": [
      {
        "keyword": "damage",
        "context": ["atk", "*", "1.5", "-", "armor"]
      }
    ]
  },
  "summon_rates": {...},
  "hero_stats": {...},
  "skill_mechanics": {...}
}
```

---

### extract_summon_rates.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –î–µ—Ç–∞–ª—å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —à–∞–Ω—Å–æ–≤ –ø—Ä–∏–∑—ã–≤–∞ –≥–µ—Ä–æ–µ–≤.

**–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç:**
- Gacha/summon —Ñ–∞–π–ª—ã
- –ü—É–ª—ã –ø—Ä–∏–∑—ã–≤–∞
- –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–µ—Ä–æ–µ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python extract_summon_rates.py
```

**–¢–∏–ø–∏—á–Ω—ã–µ —à–∞–Ω—Å—ã:**
```
–û–±—ã—á–Ω—ã–µ (1-–∑–≤–µ–∑–¥–∞): ~60-70%
–ù–µ–æ–±—ã—á–Ω—ã–µ (2-–∑–≤–µ–∑–¥—ã): ~20-25%
–†–µ–¥–∫–∏–µ (3-–∑–≤–µ–∑–¥—ã): ~8-12%
–≠–ø–∏—á–µ—Å–∫–∏–µ (4-–∑–≤–µ–∑–¥—ã): ~3-5%
–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ (5-–∑–≤–µ–∑–¥): ~1-2%
```

---

### extract_message_ids.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞ ID —Å–æ–æ–±—â–µ–Ω–∏–π Protobuf.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python extract_message_ids.py
```

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- `private-server/src/protocol/message_ids.py`

**–ü—Ä–∏–º–µ—Ä:**
```python
MESSAGE_IDS = {
    1001: "LoginRequest",
    1002: "LoginResponse",
    2001: "GetHeroListRequest",
    2002: "GetHeroListResponse",
}

MESSAGE_NAMES = {
    "LoginRequest": 1001,
    "LoginResponse": 1002,
}
```

---

## üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Protobuf

### extract_protobuf_schema.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ Protobuf —Å—Ö–µ–º –∏–∑ Lua –±–∞–π—Ç–∫–æ–¥–∞.

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü–∞—Ä—Å–∏–Ω–≥ Lua –±–∞–π—Ç–∫–æ–¥–∞
2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç
3. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º Protobuf
4. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –ø–æ–ª–µ–π

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python extract_protobuf_schema.py
```

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- `protobuf_schema_extracted.txt`

**–ü–∞—Ç—Ç–µ—Ä–Ω—ã:**
- –°–æ–æ–±—â–µ–Ω–∏—è: –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã
- –ü–æ–ª—è: –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å –º–∞–ª–µ–Ω—å–∫–æ–π –±—É–∫–≤—ã
- –ë–µ–∑ —Ç–æ—á–µ–∫ –≤ –∏–º–µ–Ω–∏

---

### reconstruct_proto.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ .proto —Ñ–∞–π–ª–æ–≤ –∏–∑ –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ê–Ω–∞–ª–∏–∑ –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç
2. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º
3. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –ø–æ–ª–µ–π (—ç–≤—Ä–∏—Å—Ç–∏–∫–∞)
4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è .proto —Ñ–∞–π–ª–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python reconstruct_proto.py
```

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- `private-server/proto/dr2_comm.proto`
- `private-server/proto/dr2_logic.proto`

**–ü—Ä–∏–º–µ—Ä .proto:**
```protobuf
syntax = "proto3";

package dr2.comm;

message LoginRequest {
  string username = 1;
  string password = 2;
  int64 timestamp = 3;
}

message LoginResponse {
  int32 code = 1;
  string message = 2;
  int64 user_id = 3;
  string session_token = 4;
}
```

**–≠–≤—Ä–∏—Å—Ç–∏–∫–∞ —Ç–∏–ø–æ–≤:**
- `*_id`, `id` ‚Üí `int64`
- `count`, `num` ‚Üí `int32`
- `flag`, `is_*` ‚Üí `bool`
- `time`, `ts` ‚Üí `int64`
- `*list`, `*s` ‚Üí `repeated`

---

### compile_proto.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–º–ø–∏–ª—è—Ü–∏—è Protobuf —Å—Ö–µ–º –≤ Python –∫–æ–¥.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python compile_proto.py
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
```bash
pip install grpcio-tools
```

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –°–∫–∞–Ω–∏—Ä—É–µ—Ç `private-server/proto/*.proto`
2. –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç —á–µ—Ä–µ–∑ `grpc_tools.protoc`
3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `*_pb2.py` —Ñ–∞–π–ª—ã
4. –°–æ–∑–¥–∞–µ—Ç `__init__.py`

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- `private-server/src/protocol/dr2_comm_pb2.py`
- `private-server/src/protocol/dr2_logic_pb2.py`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ:**
```python
from protocol import dr2_comm_pb2

request = dr2_comm_pb2.LoginRequest()
request.username = "test"
request.password = "test123"
```

---

## üóÑÔ∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### generate_import_sql.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SQL –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –∏–≥—Ä–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL.

**–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç:**
- INSERT –¥–ª—è –≤—Å–µ—Ö –≥–µ—Ä–æ–µ–≤
- INSERT –¥–ª—è –≤—Å–µ—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- –¢–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python generate_import_sql.py
```

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- `network/import_game_data.sql`

**–ü—Ä–∏–º–µ—Ä SQL:**
```sql
-- –ò–º–ø–æ—Ä—Ç –≤—Å–µ—Ö –≥–µ—Ä–æ–µ–≤ –∏–∑ –∏–≥—Ä—ã
INSERT INTO hero_data (hero_id, name, quality, base_atk, base_hp, base_armor, base_speed, grow_atk, grow_hp, grow_armor, grow_speed) VALUES
(1001, 'Norma', 3, 150, 2000, 50, 100, 5, 50, 2.5, 1),
(1002, 'Starlight', 5, 300, 5000, 100, 120, 10, 100, 5, 2)
ON CONFLICT (hero_id) DO NOTHING;

-- –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
INSERT INTO users (username, password_hash, email) VALUES
('test', '$2b$12$...', 'test@test.com')
ON CONFLICT (username) DO NOTHING;
```

**–ò–º–ø–æ—Ä—Ç –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
```bash
docker-compose up -d
psql -U postgres -d idleheroes < network/import_game_data.sql
```

---

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –í–µ—Ä—Å–∏—è Python
```
Python 3.8+
```

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
# –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
# struct
# pathlib
# json
# os
# sys

# Protobuf
pip install protobuf
pip install grpcio-tools

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
pip install psycopg2-binary

# –£—Ç–∏–ª–∏—Ç—ã
pip install colorama
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü–æ–ª–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏

#### 1. –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ Lua —Ñ–∞–π–ª–æ–≤
```bash
python decrypt_ULTIMATE.py
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `decrypted_lua_FINAL/` —Å —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º –±–∞–π—Ç–∫–æ–¥–æ–º

#### 2. –î–µ–∫–æ–º–ø–∏–ª—è—Ü–∏—è –≤ —á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥
```bash
python decompile_all_advanced.py
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `decompiled_lua_READABLE/` —Å –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º

#### 3. –ê–Ω–∞–ª–∏–∑ –±–∞–π—Ç–∫–æ–¥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```bash
python analyze_bytecode.py
```

#### 4. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–≥—Ä–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```bash
python extract_game_data.py
python extract_game_mechanics.py
python extract_summon_rates.py
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** JSON —Ñ–∞–π–ª—ã –≤ `private-server/data/`

#### 5. –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ä–º—É–ª
```bash
python analyze_formulas.py
```

#### 6. –†–∞–±–æ—Ç–∞ —Å Protobuf
```bash
# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ö–µ–º
python extract_protobuf_schema.py

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ .proto
python reconstruct_proto.py

# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ ID —Å–æ–æ–±—â–µ–Ω–∏–π
python extract_message_ids.py

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤ Python
python compile_proto.py
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Python –º–æ–¥—É–ª–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º

#### 7. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SQL –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
python generate_import_sql.py
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `network/import_game_data.sql`

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

```
Tools/
‚îú‚îÄ‚îÄ decrypt_ULTIMATE.py              # –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ Lua
‚îú‚îÄ‚îÄ improved_lua_decompiler.py       # –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –¥–µ–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä
‚îú‚îÄ‚îÄ advanced_decompiler.py           # –ë–∞–∑–æ–≤—ã–π –¥–µ–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä
‚îú‚îÄ‚îÄ decompile_all_advanced.py        # –ú–∞—Å—Å–æ–≤–∞—è –¥–µ–∫–æ–º–ø–∏–ª—è—Ü–∏—è
‚îú‚îÄ‚îÄ analyze_bytecode.py              # –ê–Ω–∞–ª–∏–∑ –±–∞–π—Ç–∫–æ–¥–∞
‚îú‚îÄ‚îÄ analyze_formulas.py              # –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ä–º—É–ª
‚îú‚îÄ‚îÄ extract_game_data.py             # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ extract_game_mechanics.py        # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∫
‚îú‚îÄ‚îÄ extract_summon_rates.py          # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —à–∞–Ω—Å–æ–≤
‚îú‚îÄ‚îÄ extract_message_ids.py           # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ ID —Å–æ–æ–±—â–µ–Ω–∏–π
‚îú‚îÄ‚îÄ extract_protobuf_schema.py       # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ Protobuf
‚îú‚îÄ‚îÄ reconstruct_proto.py             # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ .proto
‚îú‚îÄ‚îÄ compile_proto.py                 # –ö–æ–º–ø–∏–ª—è—Ü–∏—è Protobuf
‚îî‚îÄ‚îÄ generate_import_sql.py           # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SQL

–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
lua_backup/                          # –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ Lua —Ñ–∞–π–ª—ã

–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
decrypted_lua_FINAL/                 # –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –±–∞–π—Ç–∫–æ–¥
decompiled_lua_READABLE/             # –î–µ–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
private-server/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ game_configs/                # JSON —Å –∏–≥—Ä–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ game_mechanics.json          # –ò–≥—Ä–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ summon_rates.json            # –®–∞–Ω—Å—ã –ø—Ä–∏–∑—ã–≤–∞
‚îú‚îÄ‚îÄ proto/                           # .proto —Ñ–∞–π–ª—ã
‚îî‚îÄ‚îÄ src/
    ‚îî‚îÄ‚îÄ protocol/                    # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Python –º–æ–¥—É–ª–∏
network/
‚îî‚îÄ‚îÄ import_game_data.sql             # SQL –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
```

---

## üî¨ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–æ—Ä–º–∞—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è Lua

```
–ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª
    ‚Üì
[–°–∏–≥–Ω–∞—Ç—É—Ä–∞ DHGAMES]
    ‚Üì
[XOR —Å —Ç–∞–±–ª–∏—Ü–µ–π –¥–∞–Ω–Ω—ã—Ö]
    ‚Üì
[XXTEA —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ]
    ‚Üì
[–°–∏–≥–Ω–∞—Ç—É—Ä–∞ DHZAMES]
    ‚Üì
[ZLIB —Å–∂–∞—Ç–∏–µ]
    ‚Üì
–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Lua 5.1 –±–∞–π—Ç–∫–æ–¥–∞

```
[–ó–∞–≥–æ–ª–æ–≤–æ–∫ 12 –±–∞–π—Ç]
  - –°–∏–≥–Ω–∞—Ç—É—Ä–∞: 0x1B 'L' 'u' 'a'
  - –í–µ—Ä—Å–∏—è: 0x51
  - –§–æ—Ä–º–∞—Ç: 0x00
  - Endianness: 0x01
  - sizeof(int): 0x04
  - sizeof(size_t): 0x04/0x08
  - sizeof(Instruction): 0x04
  - sizeof(lua_Number): 0x08
  - Integral flag: 0x00

[–§—É–Ω–∫—Ü–∏—è]
  - –ò–º—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (string)
  - –°—Ç—Ä–æ–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (int)
  - –ü–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞ (int)
  - –ö–æ–ª-–≤–æ upvalues (byte)
  - –ö–æ–ª-–≤–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (byte)
  - Is vararg (byte)
  - –ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞ (byte)
  
  [–ö–æ–¥]
    - –ö–æ–ª-–≤–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (int)
    - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏[] (int[])
  
  [–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã]
    - –ö–æ–ª-–≤–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç (int)
    - –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã[] (—Ç–∏–ø + –∑–Ω–∞—á–µ–Ω–∏–µ)
  
  [–ü—Ä–æ—Ç–æ—Ç–∏–ø—ã]
    - –ö–æ–ª-–≤–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤ (int)
    - –ü—Ä–æ—Ç–æ—Ç–∏–ø—ã[] (Function[])
  
  [Debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è]
    - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç—Ä–æ–∫–∞—Ö[]
    - –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ[]
    - –ò–º–µ–Ω–∞ upvalues[]
```

### –û–ø–∫–æ–¥—ã Lua 5.1 (–ø–µ—Ä–µ–º–µ—à–∞–Ω–Ω—ã–µ)

Idle Heroes –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–ø–µ—Ä–µ–º–µ—à–∞–Ω–Ω—ã–µ –æ–ø–∫–æ–¥—ã** (–Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ):

| –û–ø–∫–æ–¥ | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π | Idle Heroes | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-------------|-------------|----------|
| 0x00  | MOVE        | SUB         | –í—ã—á–∏—Ç–∞–Ω–∏–µ |
| 0x01  | LOADK       | LOADK       | –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã |
| 0x06  | LOADBOOL    | CALL        | –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ |
| 0x1c  | VARARG      | MOVE        | –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ |
| 0x1a  | CLOSE       | RETURN      | –í–æ–∑–≤—Ä–∞—Ç |

**–ü–æ–ª–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥ –≤ `improved_lua_decompiler.py`**

---

## üí° –°–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏:
```python
import gc

# –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞
del large_data
gc.collect()
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
```python
code, status = decompile_file(filepath)
if code:
    # –£—Å–ø–µ—Ö
    process(code)
else:
    # –û—à–∏–±–∫–∞
    print(f"–û—à–∏–±–∫–∞: {status}")
```

### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

–î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –º–∞—Å—Å–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏:
```python
from multiprocessing import Pool

with Pool(4) as pool:
    results = pool.map(process_file, files)
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "Not Lua bytecode"
**–ü—Ä–∏—á–∏–Ω–∞:** –§–∞–π–ª –Ω–µ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω  
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ `decrypt_ULTIMATE.py`

### –û—à–∏–±–∫–∞: "No DHZAMES"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π –∫–ª—é—á —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ XOR —Ç–∞–±–ª–∏—Ü—ã –≤ `decrypt_ULTIMATE.py`

### –û—à–∏–±–∫–∞: "ZLIB error"
**–ü—Ä–∏—á–∏–Ω–∞:** –î–∞–Ω–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã –ø–æ—Å–ª–µ XXTEA  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–ª–≥–æ—Ä–∏—Ç–º XXTEA

### –û—à–∏–±–∫–∞: "protoc not found"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω grpcio-tools  
**–†–µ—à–µ–Ω–∏–µ:** `pip install grpcio-tools`

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –§–∞–π–ª—ã
- **Python —Å–∫—Ä–∏–ø—Ç–æ–≤:** 14
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~3500
- **–§—É–Ω–∫—Ü–∏–π:** ~80

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- Lua 5.1 –±–∞–π—Ç–∫–æ–¥ (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π)
- Protobuf —Å—Ö–µ–º—ã
- JSON –¥–∞–Ω–Ω—ã–µ
- SQL —Å–∫—Ä–∏–ø—Ç—ã

### –ò–∑–≤–ª–µ–∫–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ì–µ—Ä–æ–µ–≤: ~200+
- –ü—Ä–µ–¥–º–µ—Ç–æ–≤: ~500+
- –ù–∞–≤—ã–∫–æ–≤: ~300+
- Protobuf —Å–æ–æ–±—â–µ–Ω–∏–π: ~100+

---

## ü§ù –í–∫–ª–∞–¥

–≠—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è:
- –†–µ–≤–µ—Ä—Å-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥–∞ –∏–≥—Ä—ã Idle Heroes
- –°–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- –ò–∑—É—á–µ–Ω–∏—è –∏–≥—Ä–æ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∫
- –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–≥—Ä—ã

---

## ‚ö†Ô∏è –î–∏—Å–∫–ª–µ–π–º–µ—Ä

–≠—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã **—Ç–æ–ª—å–∫–æ –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π** –∏ –∏–∑—É—á–µ–Ω–∏—è –∏–≥—Ä–æ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∫. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö —Ü–µ–ª—è—Ö –∏–ª–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—Å–∫–∏—Ö –ø—Ä–∞–≤ –∑–∞–ø—Ä–µ—â–µ–Ω–æ.

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è "–∫–∞–∫ –µ—Å—Ç—å" –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –≥–∞—Ä–∞–Ω—Ç–∏–π.

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –î–µ–∫–∞–±—Ä—å 2025  
**–í–µ—Ä—Å–∏—è –∏–≥—Ä—ã:** Idle Heroes 1.34.4  
**–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã ‚úÖ
